#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
–°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª–∞ "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è" –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–æ–≤ —É—Ä–æ–∫–æ–≤.
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: python add_additional_section.py <start_num> <end_num>
"""
import sys
from pathlib import Path

def get_additional_content(lesson_num, title):
    """–ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç —Ä–∞–∑–¥–µ–ª–∞ '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è' –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ç–µ–º—ã —É—Ä–æ–∫–∞"""
    
    # –ë–∞–∑–æ–≤—ã–π —à–∞–±–ª–æ–Ω –¥–ª—è –≤—Å–µ—Ö —É—Ä–æ–∫–æ–≤
    template = f"""
---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –í–∞–∂–Ω—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è

"""
    
    # –î–æ–±–∞–≤–ª—è–µ–º —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–µ–º—ã
    if "—Å–ø–∏—Å–æ–∫" in title.lower() or "list" in title.lower():
        template += """#### 1. –ú–µ—Ç–æ–¥—ã —Å–ø–∏—Å–∫–æ–≤ - –ø–æ–ª–Ω—ã–π –æ–±–∑–æ—Ä
```python
# –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
lst = [1, 2, 3]
lst.append(4)        # [1, 2, 3, 4]
lst.extend([5, 6])   # [1, 2, 3, 4, 5, 6]
lst.insert(0, 0)     # [0, 1, 2, 3, 4, 5, 6]

# –£–¥–∞–ª–µ–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤
lst.remove(3)        # —É–¥–∞–ª–∏—Ç—å –ø–µ—Ä–≤–æ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ 3
item = lst.pop()     # —É–¥–∞–ª–∏—Ç—å –∏ –≤–µ—Ä–Ω—É—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π
item = lst.pop(0)    # —É–¥–∞–ª–∏—Ç—å –∏ –≤–µ—Ä–Ω—É—Ç—å –ø–æ –∏–Ω–¥–µ–∫—Å—É
lst.clear()          # –æ—á–∏—Å—Ç–∏—Ç—å –≤–µ—Å—å —Å–ø–∏—Å–æ–∫
```

#### 2. –°–ø–∏—Å–∫–æ–≤—ã–µ –≤–∫–ª—é—á–µ–Ω–∏—è (List Comprehension)
```python
# –ë–∞–∑–æ–≤—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
squares = [x**2 for x in range(10)]

# –° —É—Å–ª–æ–≤–∏–µ–º
evens = [x for x in range(20) if x % 2 == 0]

# –í–ª–æ–∂–µ–Ω–Ω—ã–µ
matrix = [[i*j for j in range(5)] for i in range(5)]
```

### üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

#### –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Å–ø–∏—Å–∫–∞
```python
numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
evens = [n for n in numbers if n % 2 == 0]
print(evens)  # [2, 4, 6, 8, 10]
```

### üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

**–û—à–∏–±–∫–∞: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –≤–æ –≤—Ä–µ–º—è –∏—Ç–µ—Ä–∞—Ü–∏–∏**
```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
lst = [1, 2, 3, 4, 5]
for item in lst:
    if item % 2 == 0:
        lst.remove(item)  # –ú–æ–∂–µ—Ç –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã!

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –∏—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–ø–∏—é
lst = [1, 2, 3, 4, 5]
for item in lst[:]:
    if item % 2 == 0:
        lst.remove(item)
```

### üìå –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: —Å–ø–∏—Å–∫–∏](https://docs.python.org/3/tutorial/datastructures.html#more-on-lists)
- [PEP 202: List Comprehensions](https://www.python.org/dev/peps/pep-0202/)
"""
    
    elif "—Å—Ç—Ä–æ–∫" in title.lower() or "str" in title.lower():
        template += """#### 1. –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Å—Ç—Ä–æ–∫
```python
s = "Hello, World!"

# –†–µ–≥–∏—Å—Ç—Ä
s.upper()           # "HELLO, WORLD!"
s.lower()           # "hello, world!"
s.capitalize()      # "Hello, world!"
s.title()           # "Hello, World!"

# –ü–æ–∏—Å–∫ –∏ –∑–∞–º–µ–Ω–∞
s.find("World")     # 7
s.replace("World", "Python")  # "Hello, Python!"
s.count("l")        # 3

# –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ
words = s.split(", ")  # ["Hello", "World!"]
"-".join(words)        # "Hello-World!"
```

#### 2. –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–æ–∫
```python
name = "–ê–ª–∏—Å–∞"
age = 25

# f-—Å—Ç—Ä–æ–∫–∏ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
f"–ú–µ–Ω—è –∑–æ–≤—É—Ç {name}, –º–Ω–µ {age} –ª–µ—Ç"

# format()
"–ú–µ–Ω—è –∑–æ–≤—É—Ç {}, –º–Ω–µ {} –ª–µ—Ç".format(name, age)

# % (—Å—Ç–∞—Ä—ã–π —Å—Ç–∏–ª—å)
"–ú–µ–Ω—è –∑–æ–≤—É—Ç %s, –º–Ω–µ %d –ª–µ—Ç" % (name, age)
```

### üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å—Ç—Ä–æ–∫–∏
```python
text = "Python123"
print(text.isalnum())   # True - –±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã
print(text.isalpha())   # False - –µ—Å—Ç—å —Ü–∏—Ñ—Ä—ã
print(text.isdigit())   # False - –µ—Å—Ç—å –±—É–∫–≤—ã
```

### üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

**–û—à–∏–±–∫–∞: –ü–æ–ø—ã—Ç–∫–∞ –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫—É**
```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Å—Ç—Ä–æ–∫–∏ –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã!
# s = "hello"
# s[0] = "H"  # TypeError!

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
s = "hello"
s = "H" + s[1:]  # "Hello"
```

### üìå –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: —Å—Ç—Ä–æ–∫–∏](https://docs.python.org/3/library/stdtypes.html#text-sequence-type-str)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: f-—Å—Ç—Ä–æ–∫–∏](https://docs.python.org/3/reference/lexical_analysis.html#f-strings)
"""
    
    else:
        # –û–±—â–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ç–µ–º
        template += """#### 1. –ö–ª—é—á–µ–≤—ã–µ –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏
```python
# –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö
# –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ —É—Ä–æ–∫–∞
```

### üí° –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–∏–º–µ—Ä—ã

#### –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä
```python
# –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–Ω—Ü–µ–ø—Ü–∏–π –∏–∑ —É—Ä–æ–∫–∞
pass
```

### üö® –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

**–¢–∏–ø–∏—á–Ω–∞—è –æ—à–∏–±–∫–∞**
```python
# ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û
# –ü—Ä–∏–º–µ—Ä –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞

# ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û
# –ü—Ä–∏–º–µ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞
```

### üìå –ü–æ–ª–µ–∑–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Python](https://docs.python.org/3/)
"""
    
    return template


def add_section_to_files(start_num, end_num):
    """–î–æ–±–∞–≤–ª—è–µ—Ç —Ä–∞–∑–¥–µ–ª '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è' –∫ —Ñ–∞–π–ª–∞–º –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ"""
    root = Path('.')
    files = sorted([p for p in root.glob('*.md') if p.name[0].isdigit()])
    
    processed = []
    skipped = []
    
    for p in files:
        num = int(p.name.split()[0])
        if start_num <= num <= end_num:
            text = p.read_text(encoding='utf-8')
            
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ä–∞–∑–¥–µ–ª
            if '## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è' in text:
                skipped.append((num, p.name))
                continue
            
            # –ò–∑–≤–ª–µ–∫–∞–µ–º –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Ä–æ–∫–∞
            title_line = text.split('\n')[0]
            title = title_line.replace('#', '').strip()
            
            # –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–¥–µ–ª –≤ –∫–æ–Ω–µ—Ü
            additional_section = get_additional_content(num, title)
            new_text = text.rstrip() + '\n' + additional_section
            
            p.write_text(new_text, encoding='utf-8')
            processed.append((num, p.name))
    
    print(f"\n‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ñ–∞–π–ª–æ–≤: {len(processed)}")
    for num, name in processed:
        print(f"  {num}: {name}")
    
    if skipped:
        print(f"\n‚è≠Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ (—É–∂–µ –µ—Å—Ç—å —Ä–∞–∑–¥–µ–ª): {len(skipped)}")
        for num, name in skipped:
            print(f"  {num}: {name}")


if __name__ == '__main__':
    if len(sys.argv) != 3:
        print("–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: python add_additional_section.py <start_num> <end_num>")
        print("–ü—Ä–∏–º–µ—Ä: python add_additional_section.py 10 14")
        sys.exit(1)
    
    start = int(sys.argv[1])
    end = int(sys.argv[2])
    
    print(f"–î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ '–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è' –∫ —Ñ–∞–π–ª–∞–º {start}-{end}...")
    add_section_to_files(start, end)
    print("\n–ì–æ—Ç–æ–≤–æ!")
