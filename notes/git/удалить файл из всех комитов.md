–¢—ã –ø–æ–ª—É—á–∏–ª –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ:

```
Cannot create a new backup.
A previous backup already exists in refs/original/
Force overwriting the backup with -f
```

–≠—Ç–æ **–Ω–æ—Ä–º–∞–ª—å–Ω–æ**. Git –Ω–µ –º–æ–∂–µ—Ç –∑–∞–ø—É—Å—Ç–∏—Ç—å `git filter-branch`, –ø–æ—Ç–æ–º—É —á—Ç–æ –ø—Ä–µ–¥—ã–¥—É—â–∏–π –±—ç–∫–∞–ø –ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ–º–æ–π –∏—Å—Ç–æ—Ä–∏–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.

---

# ‚úÖ –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç?

–ö–æ–≥–¥–∞ —Ç—ã –∑–∞–ø—É—Å–∫–∞–µ—à—å:

```bash
git filter-branch --tree-filter "rm -rf file3" HEAD
```

Git —Ö–æ—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç–∞—Ä—É—é –∏—Å—Ç–æ—Ä–∏—é –≤ `refs/original/`, –Ω–æ –≤–∏–¥–∏—Ç, —á—Ç–æ —Ç–∞–º —É–∂–µ –µ—Å—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∞—è –∫–æ–ø–∏—è ‚Äî –ø–æ—ç—Ç–æ–º—É –æ–Ω –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.

---

# ‚úÖ –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å

–¢—ã –º–æ–∂–µ—à—å **–ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å —Å—Ç–∞—Ä—ã–π –±—ç–∫–∞–ø**:

### üî• –ó–∞–ø—É—Å—Ç–∏:

```bash
git filter-branch -f --tree-filter "rm -rf file3" HEAD
```

–§–ª–∞–≥ `-f` = _force overwrite_.

---

# ‚ö†Ô∏è –í–∞–∂–Ω–æ! –û—á–µ–Ω—å –≤–∞–∂–Ω–æ!

`git filter-branch` **–ø–µ—Ä–µ–ø–∏—Å—ã–≤–∞–µ—Ç –∏—Å—Ç–æ—Ä–∏—é**, –∏ **–ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ push –≤—ã–ø–æ–ª–Ω—è—Ç—å —Å `--force-with-lease`**, –∏–Ω–∞—á–µ GitHub –Ω–µ –ø—Ä–∏–º–µ—Ç –Ω–æ–≤—É—é –∏—Å—Ç–æ—Ä–∏—é:

```bash
git push origin main --force-with-lease
```

`--force-with-lease` –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ, —á–µ–º `--force`.

---

# üßº –•–æ—á–µ—à—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–±—Ä–æ—Å–∏—Ç—å –±—ç–∫–∞–ø—ã filter-branch?

–ï—Å–ª–∏ —Ç—ã –º–Ω–æ–≥–æ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–ª, –º–æ–∂–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å `refs/original`:

```bash
rm -rf .git/refs/original
rm -rf .git/refs/original/
git reflog expire --expire=now --all
git gc --prune=now
```

–≠—Ç–æ —É–¥–∞–ª–∏—Ç —Å—Ç–∞—Ä—ã–µ –±—ç–∫–∞–ø—ã, –æ—Å–≤–æ–±–æ–¥–∏—Ç –º–µ—Å—Ç–æ –∏ —É–±–µ—Ä—ë—Ç –ø–æ–º–µ—Ç–∫–∏.

---

# ‚ùì –ï—Å–ª–∏ —Ö–æ—á–µ—à—å —É–¥–∞–ª–∏—Ç—å –í–°–ï PDF / —Ñ–∞–π–ª—ã –∏–∑ –í–°–ï–ô –∏—Å—Ç–æ—Ä–∏–∏

–¢–æ–≥–¥–∞ –≤–º–µ—Å—Ç–æ `tree-filter` –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `git filter-repo` (GitHub —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç –∏–º–µ–Ω–Ω–æ –µ–≥–æ). –ú–æ–≥—É –Ω–∞–ø–∏—Å–∞—Ç—å –∫–æ–º–∞–Ω–¥—É ‚Äî —Å–∫–∞–∂–∏.

---

–•–æ—á–µ—à—å ‚Äî –ø–æ–¥–≥–æ—Ç–æ–≤–ª—é **–≥–æ—Ç–æ–≤—ã–π –ø–∞–π–ø–ª–∞–π–Ω –∫–æ–º–∞–Ω–¥**, –∫–∞–∫:

- —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏,
    
- –æ—á–∏—Å—Ç–∏—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π,
    
- –ø–µ—Ä–µ–∑–∞–ª–∏—Ç—å –Ω–∞ GitHub –æ–¥–Ω–∏–º –∫–æ–º–º–∏—Ç–æ–º,
    
- –∏–ª–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é ¬´—Å –Ω—É–ª—è¬ª.
    

–ù–∞–ø–∏—à–∏, —á—Ç–æ –∏–º–µ–Ω–Ω–æ —Ç—ã —Ö–æ—á–µ—à—å —Å–¥–µ–ª–∞—Ç—å –≤ –∏—Ç–æ–≥–µ üëá